{"version":3,"file":"start.js","sources":["../../src/js/start.js"],"sourcesContent":["'use strict';\nasync function fetchNoteBook() {\n  const cachedData = sessionStorage.getItem('jsonData');\n\n  if (cachedData) {\n    return JSON.parse(cachedData);\n  }\n\n  try {\n    const response = await fetch('/wp-content/uploads/notebookdata.json');\n    if (!response.ok) {\n      throw new Error('Network response was not ok');\n    }\n    const data = await response.json();\n\n    // Save the data in sessionStorage\n    sessionStorage.setItem('jsonData', JSON.stringify(data));\n    return data;\n  } catch (error) {\n    console.error('Error fetching JSON:', error);\n  }\n}\n\nconst root = document.querySelector(':root');\nconst rootstyle = root.style;\nconst $ = document.querySelector.bind(document);\nconst $$ = document.querySelectorAll.bind(document);\nconst $create = document.createElement.bind(document);\nconst $createcomment = document.createComment.bind(document);\nconst setprop = rootstyle.setProperty.bind(rootstyle);\n\nroot.classList.add(\n  getRandItem(Array.from({ length: 2 }, (v, i) => `color_${i + 1}`))\n);\n\n// function\nfunction getRandItem(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nfunction isPage(check) {\n  return document.body.classList.contains(check);\n}\n\nfunction $createFrag() {\n  return new DocumentFragment();\n}\n\nfunction throttle_debounce(fn, delay1, delay2) {\n  // Capture the current time\n  let time = Date.now();\n  let timeoutId;\n  delay2 = delay1 < delay2 ? delay2 : delay1;\n\n  // Here's our logic\n  return () => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn(true), delay2);\n    if (time + delay1 - Date.now() <= 0) {\n      fn(false);\n      time = Date.now();\n    }\n  };\n}\n\nfunction wait(delay) {\n  return new Promise((resolve) => setTimeout(resolve, delay));\n}\n\nfunction getScrollbarWidth() {\n  const outer = document.createElement('div');\n  outer.style.visibility = 'hidden';\n  outer.style.overflow = 'scroll';\n  outer.style.msOverflowStyle = 'scrollbar';\n  document.body.appendChild(outer);\n\n  const inner = document.createElement('div');\n  outer.appendChild(inner);\n\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n\n  outer.parentNode.removeChild(outer);\n  setprop('--scrlbrwd', `${scrollbarWidth}px`);\n  return scrollbarWidth;\n}\n\nwindow.renderCache = {};\n\nfunction hasCache(key) {\n  if (!key) {\n    return false;\n  }\n  return key in window.renderCache;\n}\n\nfunction setCache(key, obj) {\n  if (!key) {\n    return false;\n  }\n  window.renderCache[key] = obj;\n}\n\nfunction getCache(key) {\n  console.log(`get cache image #` + key + ` successful`);\n  return window.renderCache[key];\n}\n\nfunction deleteCache(key) {\n  delete window.renderCache[key];\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const lazyImages = document.querySelectorAll(\n    '#main .mainbody :is(img[data-src],iframe[data-src])'\n  );\n\n  const imageObserver = new IntersectionObserver((entries, observer) => {\n    entries.forEach((entry) => {\n      if (entry.isIntersecting) {\n        const img = entry.target;\n        img.src = img.getAttribute('data-src'); // Load the actual image\n        img.srcset = img.getAttribute('data-srcset'); // Load the srcset if available\n        observer.unobserve(img);\n      }\n    });\n  });\n\n  lazyImages.forEach((image) => {\n    imageObserver.observe(image);\n  });\n});\n\nsessionStorage.getItem('view') === 'l'\n  ? toggleViewmode(true, true)\n  : toggleViewmode(false, true);\nfunction toggleViewmode(isList, init = false) {\n  document.documentElement.classList.toggle('isList', isList);\n  sessionStorage.setItem('view', isList ? 'l' : 'g');\n  init || duoResponsive();\n}\n"],"names":[],"mappings":"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"}