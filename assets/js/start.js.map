{"version":3,"file":"start.js","sources":["../../src/js/start.js"],"sourcesContent":["'use strict';\nasync function fetchNoteBook() {\n  const cachedData = sessionStorage.getItem('jsonData');\n\n  if (cachedData) {\n    return JSON.parse(cachedData);\n  }\n\n  try {\n    const response = await fetch('/wp-content/uploads/notebookdata.json');\n    if (!response.ok) {\n      throw new Error('Network response was not ok');\n    }\n    const data = await response.json();\n\n    // Save the data in sessionStorage\n    sessionStorage.setItem('jsonData', JSON.stringify(data));\n    return data;\n  } catch (error) {\n    console.error('Error fetching JSON:', error);\n  }\n}\n\nconst root = document.querySelector(':root');\nconst rootstyle = root.style;\nconst $ = document.querySelector.bind(document);\nconst $$ = document.querySelectorAll.bind(document);\nconst $create = document.createElement.bind(document);\nconst $createcomment = document.createComment.bind(document);\nconst setprop = rootstyle.setProperty.bind(rootstyle);\n\nroot.classList.add(\n  getRandItem(Array.from({ length: 2 }, (v, i) => `color_${i + 1}`))\n);\n\n// function\nfunction getRandItem(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nfunction isPage(check) {\n  return document.body.classList.contains(check);\n}\n\nfunction $createFrag() {\n  return new DocumentFragment();\n}\n\nfunction throttle_debounce(fn, delay1, delay2) {\n  // Capture the current time\n  let time = Date.now();\n  let timeoutId;\n  delay2 = delay1 < delay2 ? delay2 : delay1;\n\n  // Here's our logic\n  return () => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn(true), delay2);\n    if (time + delay1 - Date.now() <= 0) {\n      fn(false);\n      time = Date.now();\n    }\n  };\n}\n\nfunction wait(delay) {\n  return new Promise((resolve) => setTimeout(resolve, delay));\n}\n\nfunction getScrollbarWidth() {\n  const outer = document.createElement('div');\n  outer.style.visibility = 'hidden';\n  outer.style.overflow = 'scroll';\n  outer.style.msOverflowStyle = 'scrollbar';\n  document.body.appendChild(outer);\n\n  const inner = document.createElement('div');\n  outer.appendChild(inner);\n\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n\n  outer.parentNode.removeChild(outer);\n  setprop('--scrlbrwd', `${scrollbarWidth}px`);\n  return scrollbarWidth;\n}\n\nwindow.renderCache = {};\n\nfunction hasCache(key) {\n  if (!key) {\n    return false;\n  }\n  return key in window.renderCache;\n}\n\nfunction setCache(key, obj) {\n  if (!key) {\n    return false;\n  }\n  window.renderCache[key] = obj;\n}\n\nfunction getCache(key) {\n  console.log(`get cache image #` + key + ` successful`);\n  return window.renderCache[key];\n}\n\nfunction deleteCache(key) {\n  delete window.renderCache[key];\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const lazyImages = document.querySelectorAll(\n    '#main .mainbody :is(img[data-src],iframe[data-src])'\n  );\n\n  const imageObserver = new IntersectionObserver((entries, observer) => {\n    entries.forEach((entry) => {\n      if (entry.isIntersecting) {\n        const img = entry.target;\n        img.src = img.getAttribute('data-src'); // Load the actual image\n        img.srcset = img.getAttribute('data-srcset'); // Load the srcset if available\n        observer.unobserve(img);\n      }\n    });\n  });\n\n  lazyImages.forEach((image) => {\n    imageObserver.observe(image);\n  });\n});\n\nsessionStorage.getItem('view') === 'l'\n  ? toggleViewmode(true, true)\n  : toggleViewmode(false, true);\nfunction toggleViewmode(isList, init = false) {\n  document.documentElement.classList.toggle('isList', isList);\n  sessionStorage.setItem('view', isList ? 'l' : 'g');\n  init || duoResponsive();\n}\n"],"names":["async","fetchNoteBook","cachedData","sessionStorage","getItem","JSON","parse","response","fetch","ok","Error","data","json","setItem","stringify","error","console","root","document","querySelector","rootstyle","style","$","bind","$$","querySelectorAll","$create","createElement","$createcomment","createComment","setprop","setProperty","getRandItem","arr","Math","floor","random","length","isPage","check","body","classList","contains","$createFrag","DocumentFragment","throttle_debounce","fn","delay1","delay2","time","Date","now","timeoutId","clearTimeout","setTimeout","wait","delay","Promise","resolve","getScrollbarWidth","outer","visibility","overflow","msOverflowStyle","appendChild","inner","scrollbarWidth","offsetWidth","parentNode","removeChild","hasCache","key","window","renderCache","setCache","obj","getCache","log","deleteCache","toggleViewmode","isList","init","documentElement","toggle","duoResponsive","add","Array","from","v","i","addEventListener","lazyImages","imageObserver","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","img","target","src","getAttribute","srcset","unobserve","image","observe"],"mappings":"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"}