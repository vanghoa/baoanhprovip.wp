{"version":3,"file":"main.js","sources":["../../src/js/main.js"],"sourcesContent":["'use strict';\n\n// binding method\nconst body = document.body;\nconst html = document.documentElement;\nconst main = $('main');\nconst mainbody = $('.mainbody');\nconst copy = $('#copy');\nconst imgcanvas =\n  'OffscreenCanvas' in window\n    ? (() => {\n        return new OffscreenCanvas(100, 100);\n      })()\n    : $create('canvas');\n\n//\nconst rx = 2;\nconst ry = 1;\nconst ctx = imgcanvas.getContext('2d', { willReadFrequently: true });\nctx.imageSmoothingEnabled = false;\nctx.fillStyle = '#e3e3ca';\nconst isDeveloper = isPage('page-developer');\nconst isDesigner = isPage('page-designer');\nconst isHome = isPage('home') || isPage('archive') || isDeveloper || isDesigner;\nconst isWork = isPage('single-work');\nconst rem = parseFloat(getComputedStyle(document.documentElement).fontSize);\nconst hratio = 2.1;\nconst scaleX = 7.4;\nconst scaleY = scaleX * hratio;\nconst widthLimit = scaleX * 35;\nlet lazyList = {};\nlet lazyQ = [];\nlet lazyQCur = -1;\nlet lazyQBlock = false;\nconst char = {\n  note: '\"',\n  bg: '`',\n  bg2: '_',\n  trans: null,\n  // prettier-ignore\n  lbtn: stringifyASCII([\n    ` █ `,\n    `█◄█`,\n    ` █ `,\n  ]),\n  // prettier-ignore\n  rbtn: stringifyASCII([\n    ` █ `,\n    `█►█`,\n    ` █ `\n  ]),\n  idc: '●',\n  mouse: '█',\n  divider: '|',\n  hL: '-',\n};\nconst cacheKey = {\n  imgH: { name: 'imgHolder', allkeys: [] },\n  storyS: { name: 'storySection' },\n};\nlet grayRamp = '█▒░@%*=--..__';\nconst grayRampObj = {\n  ...grayRamp.split('').reduce((p, c, i) => {\n    return {\n      ...p,\n      [c]: i,\n    };\n  }, {}),\n  [char.bg2]: grayRamp.length - 1,\n  [char.bg]: grayRamp.length - 3,\n};\nconst rampLength = grayRamp.length;\n\nfunction stringifyASCII(arr) {\n  const str = arr.join('');\n  return { w: arr[0].length, h: arr.length, str };\n}\n\nlet screenlength = 0;\nlet cmts = [];\nconst cmtsScreen = [];\nlet stopEvething = true;\n\nconst mainmainbody = $('#main .mainbody');\nconst mainnav = $('#main nav');\n{\n  // setup\n  const fragcopy = $createFrag();\n  for (const childElement of main.children) {\n    fragcopy.appendChild(childElement.cloneNode(true));\n  }\n  copy.appendChild(fragcopy);\n  //\n  if (window.location.hash == '#everything') {\n    const el = $('#main .everything');\n    if (el) {\n      mainmainbody.scrollTo({\n        top: el.offsetTop - mainnav.clientHeight,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }\n  }\n}\n\nfunction reSetup() {\n  const newscreenlength = reMsrY(innerHeight);\n  if (newscreenlength !== screenlength) {\n    screenlength = newscreenlength;\n    const fragcmt = $createFrag();\n    cmts.forEach((cmt) => {\n      cmt.remove();\n    });\n    cmts = Array.from({ length: screenlength }, (v, k) => {\n      const cmt = $createcomment(\n        window.canvasData[k] ? window.canvasData[k].join('') : ''\n      );\n      fragcmt.append(cmt);\n      return cmt;\n    });\n    html.before(fragcmt);\n  }\n}\n\nfunction scrollToTop() {\n  mainmainbody.scrollTo({\n    top: 0,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\nconst realh = $('#copy .realheight');\nconst realhmain = $('main .realheight');\nconst nav = $('#copy nav .bg-layer');\nconst navTxt = [...$$('#copy nav .txt-layer')];\nconst allBg2 = [\n  ...$$('#copy .mainbody .bg-layer'),\n  ...$$('#copy .mainbody .cp-layer > *:not(figure)'),\n  ...$$('#copy .mainbody .cp-layer img'),\n  ...$$('#copy .odd-layer > :nth-child(even)'),\n];\nconst imgHolder = $('#copy .imgholder');\nconst imgHolderMain = $('#main .imgholder');\nconst allImgHomeMain = $$('#main .mainbody .imgwrapper');\nconst allImgWrapper = [...$$('#copy .mainbody .imgwrapper')];\nconst allImgHome = Array.from(allImgWrapper, (el, k) => {\n  const idc = el.nextElementSibling.querySelector(`.indicator`);\n  return {\n    el: el,\n    group: [...el.querySelectorAll('img')],\n    lbtn: el.nextElementSibling.querySelector('.lbtn svg'),\n    rbtn: el.nextElementSibling.querySelector('.rbtn svg'),\n    idc,\n    hoverlayer:\n      allImgHomeMain[k].nextElementSibling.querySelector('.hover-layer'),\n    hoverchild: el.nextElementSibling.querySelector('.hover-child'),\n    idcascii:\n      idc && Array(idc.childElementCount).fill([char.idc, ` `]).flat().join(''),\n  };\n});\nconst allImg = [...$$('#copy .mainbody img')];\nconst allImgMain = [...$$('#main .mainbody img')];\nconst allTxt = [\n  ...$$('#copy .mainbody .txt-layer'),\n  ...$$('#copy .mainbody .txtp-layer > *:not(figure)'),\n];\nconst allDivider = [...$$('#copy .divider')];\nconst storySection = {\n  img: [...$$('#copy .storysection .imgwrapper img')],\n  bg: $('#copy .storysection .bg-layer'),\n  txt: [...$$('#copy .storysection .txt-layer')],\n};\nconst inputNoteMain = $('#main #input_note');\nconst inputNote = $('#copy #input_note');\nconst notebookHolder = $('#copy .notebookholder');\nconst inputResponsive = $('#main #input_responsive');\nconst allHorizontalLine = [...$$('#copy .mainbody .horizontal-line')];\nlet notebookData = null;\n\nif (isHome) {\n  console.log('home page');\n\n  const imgwrappers = $$('main .homegrid .imgwrapper');\n  window.imgsecs = $$('main .homegrid .imgsec');\n  const indicators = [];\n  window.curs = [];\n  let currentSlideEls = [];\n\n  const slideObserver = new IntersectionObserver(\n    (entries, observer) => {\n      entries.forEach((entry) => {\n        const el = entry.target;\n        if (entry.isIntersecting) {\n          if (!currentSlideEls.includes(el)) {\n            currentSlideEls.push(el);\n            el.isObserved = true;\n          }\n        } else if (el.isObserved) {\n          currentSlideEls = currentSlideEls.filter((slide) => slide !== el);\n          observer.unobserve(el);\n        }\n      });\n    },\n    {\n      threshold: 0.3,\n    }\n  );\n\n  const intervalId =\n    !window.matchMedia(\n      'only screen and (max-width: 768px) and (pointer: coarse)'\n    ).matches &&\n    setInterval(() => {\n      if (currentSlideEls.length == 0) {\n        return;\n      }\n      const el = getRandItem(currentSlideEls);\n      const length = imgwrappers[el.i].childElementCount;\n      let cur = window.curs[el.i];\n      let curnow = cur.value;\n      curnow = curnow >= length ? 1 : curnow + 1;\n      window.stopPrev = slideAscii(el.i, curnow - 1, cur.value - 1, 500);\n      slide(el.i, cur, curnow, length);\n    }, 3000);\n\n  imgsecs.forEach((el, i) => {\n    const imgwrapper = imgwrappers[i];\n    const length = imgwrapper.childElementCount;\n    indicators.push(imgsecs[i].querySelectorAll('.indicator li'));\n    curs.push({ value: 1 });\n    let cur = curs[i];\n    el.i = i;\n    length > 1 && slideObserver.observe(imgsecs[i]);\n    el.addEventListener('click', function ({ target }) {\n      let curnow = cur.value;\n      if (target.closest('.lbtn')) {\n        curnow = curnow <= 1 ? 1 : curnow - 1;\n      } else if (target.closest('.rbtn')) {\n        curnow = curnow >= length ? length : curnow + 1;\n      }\n      window.stopPrev = slideAscii(i, curnow - 1, cur.value - 1, 500);\n      slide(i, cur, curnow, length);\n      currentSlideEls = currentSlideEls.filter((slide) => slide !== el);\n    });\n  });\n  // eslint-disable-next-line no-inner-declarations\n  function slide(i, cur, curnow, length) {\n    if (cur.value !== curnow) {\n      imgsecs[i].setAttribute('isfirst', curnow == 1);\n      imgsecs[i].setAttribute('islast', curnow == length);\n      indicators[i][cur.value - 1].classList.add('opacity-50');\n      indicators[i][curnow - 1].classList.remove('opacity-50');\n      imgwrappers[i].style.transform = `translateX(-${(curnow - 1) * 100}%)`;\n      //\n      cur.value = curnow;\n    }\n  }\n} else if (isWork) {\n  console.log('single-work page');\n  const imgcopyarr = [];\n  {\n    const frag = $createFrag();\n    for (const img of allImg) {\n      const div = $create('div');\n      const imgcopy = img.cloneNode(true);\n      imgcopyarr.push(imgcopy);\n      div.appendChild(imgcopy);\n      frag.appendChild(div);\n    }\n    imgHolder.appendChild(frag);\n  }\n  {\n    const frag = $createFrag();\n    let curchild = null;\n\n    imgHolderMain.onclick = () => {\n      toggle(null, null);\n    };\n    for (const i in allImgMain) {\n      const img = allImgMain[i];\n      const div = $create('div');\n      const imgcopy = img.cloneNode(true);\n      img.copy = imgcopyarr[i];\n      const formattedKey = `${cacheKey.imgH.name}-${i}`;\n      cacheKey.imgH.allkeys.push(formattedKey);\n      img.onclick = () => {\n        toggle(img.copy, imgcopy, formattedKey);\n      };\n      div.appendChild(imgcopy);\n      frag.appendChild(div);\n    }\n    imgHolderMain.appendChild(frag);\n    // eslint-disable-next-line no-inner-declarations\n    function toggle(curImgHolder, curImgHolderChild, key) {\n      curImgHolderChild && (curchild = curImgHolderChild);\n      imgHolderMain.classList[curImgHolder ? 'add' : 'remove']('open');\n      curchild.style.visibility = curImgHolder ? 'visible' : 'hidden';\n      curchild.originsrc ??\n        (curImgHolder &&\n          (curchild.originsrc = curchild.src =\n            curchild.getAttribute(`data-src`) || curchild.src));\n      window.curImgHolder = curImgHolder;\n      if (!stopEvething) {\n        drawImgHolderFixed(curImgHolder ? 3 : null, key);\n        cmtRenderScreen();\n      }\n    }\n  }\n} else if (inputNote) {\n  notebookData = fetchNoteBook();\n  if (window.history.replaceState) {\n    window.history.replaceState(null, null, window.location.href);\n  }\n  const btn = $('#main [type=\"submit\"]');\n  const btncopy = $('#copy [type=\"submit\"]');\n  const form = [...$$('form')];\n  if (sessionStorage.getItem('submit')) {\n    form.forEach((el) => el.classList.add('disabled'));\n    btn.disabled ||\n      (btn.value = btncopy.value =\n        'you already sent!\\nthanks a lot!\\n\\n(you can find the message inside devtool with the respective screensize at the time it is sent!)');\n    btn.disabled = inputNoteMain.disabled = true;\n  } else {\n    inputNoteMain.parentElement.onsubmit = () => {\n      form.forEach((el) => el.classList.add('disabled'));\n      btn.value = btncopy.value = 'sending...';\n      sessionStorage.setItem('submit', 'true');\n      sessionStorage.removeItem('jsonData');\n      cmtRenderScreen();\n    };\n    inputNoteMain.oninput = () => {\n      inputNote.value = inputNoteMain.value;\n      if (!stopEvething) {\n        drawFewRect(\n          window.canvasData,\n          [inputNote],\n          inputNote.rectData && [inputNote.rectData],\n          undefined,\n          undefined,\n          { fxl: -1 }\n        );\n        drawTxt(window.canvasData, [inputNote], true, true);\n        cmtRenderScreen();\n      }\n    };\n  }\n}\n\nlet allNotes = [];\n\ngetScrollbarWidth();\nwindow.onload = async () => {\n  duoResponsive();\n  if (!inputNote) {\n    return;\n  }\n  const data = await notebookData;\n  const frag = $createFrag();\n  data &&\n    (allNotes = data.map(({ value, responsive }) => {\n      const p = $create('p');\n      p.innerHTML = value;\n      p.className = `${getNoteResponsiveClass(+responsive)} p-3 text-center`;\n      p.style.setProperty('--X', Math.floor(Math.random() * 81) + '%');\n      p.style.setProperty('--Y', Math.floor(Math.random() * 81) + '%');\n      frag.append(p);\n      return p;\n    }));\n  notebookHolder.append(frag);\n  drawNotes();\n  cmtRenderScreen();\n};\nonresize = throttle_debounce(\n  function (isFinal) {\n    isFinal && getScrollbarWidth();\n    duoResponsive(isFinal);\n  },\n  100,\n  400\n);\n\nfunction drawNotes() {\n  drawFewRect(window.fixedLayer, allNotes, undefined, char.note, undefined, {\n    rx_: 1,\n  });\n  drawTxt(window.fixedLayer, allNotes);\n}\n\nfunction setEvent(el, on, fn) {\n  if (fn) {\n    !el[on] && (el[on] = fn);\n  } else {\n    el[on] && (el[on] = null);\n  }\n}\n\nfunction mouseMove(e) {\n  if (stopEvething) {\n    return;\n  }\n  const mouseChange = calcMousePos(e);\n  if (!mouseChange || window.scrollTop == undefined) {\n    return;\n  }\n  const { mouseY: ogY, mouseX: ogX } = mouseChange;\n  if (ogY != undefined) {\n    const char = (() => {\n      let intensity = 0;\n      const fixedArr = window.fixedLayer?.[ogY];\n      if (fixedArr?.[ogX]) {\n        if (fixedArr[ogX].intensity) {\n          intensity = fixedArr[ogX].intensity;\n        } else {\n          return fixedArr?.[ogX];\n        }\n      }\n      const absArr = window.absoluteLayer?.[ogY + scrollTop];\n      if (absArr?.[ogX]) {\n        return filterGrayRamp(absArr[ogX], intensity);\n      }\n      const staticArr = canvasData[ogY + scrollTop]?.[ogX];\n      return staticArr ? filterGrayRamp(staticArr, intensity) : '';\n    })();\n\n    replaceChar(char, ogX, ogY);\n  }\n  //\n  replaceChar(char.mouse, window.mouseX, window.mouseY);\n\n  function replaceChar(char, x, y) {\n    const content = cmts[y]?.nodeValue;\n    content &&\n      x < content.length &&\n      (cmts[y].nodeValue = `${content.slice(0, x)}${char}${content.slice(\n        x + 1\n      )}`);\n  }\n}\n\nfunction scrollResponsive() {\n  if (stopEvething) {\n    return;\n  }\n  calcScrollTop();\n  for (const i in lazyList) {\n    lazyList[i]();\n  }\n  cmtRenderScreen();\n}\n\nfunction mouseEnter(i) {\n  if (!window.imgsecs?.[i] || stopEvething) {\n    return;\n  }\n  const { hoverchild, hoverrect } = window.imgsecs[i];\n  window.imgsecs[i].isHover = true;\n  drawFewRect(window.absoluteLayer, [hoverchild], [hoverrect]);\n  drawTxt(window.absoluteLayer, [hoverchild]);\n  cmtRenderScreen();\n}\n\nfunction mouseLeave(i) {\n  if (!window.imgsecs?.[i]) {\n    return;\n  }\n  const { hoverchild, hoverrect } = window.imgsecs[i];\n  window.imgsecs[i].isHover = false;\n  drawFewRect(window.absoluteLayer, [hoverchild], [hoverrect], null);\n  cmtRenderScreen();\n}\n\nfunction drawImgHolderFixed(intensity = 3, key, isFinal = true) {\n  const vl = intensity\n    ? {\n        intensity: 3,\n      }\n    : null;\n  window.fixedLayer = Array.from({ length: screenlength }, () =>\n    Array.from({ length: window.fixedLayer[0].length }, () => vl)\n  );\n  drawNav(intensity, isFinal);\n  intensity &&\n    (window.imgHolder = drawImg(\n      window.fixedLayer,\n      [window.curImgHolder],\n      str2CanvasArrNoMask.bind({ isOL: true }),\n      false,\n      key,\n      isFinal\n    ));\n}\n\nfunction stopSlideAscii() {\n  if (window.stopPrev) {\n    window.stopPrev();\n  }\n}\n\nfunction slideAscii(i, curnow, curprev, time) {\n  stopSlideAscii();\n  let stop = false;\n  if (\n    !imgsecs[i].ascii ||\n    stop ||\n    curnow == curprev ||\n    !imgsecs[i].ascii.arr ||\n    stopEvething\n  ) {\n    return;\n  }\n  const delay_ = 100;\n  let { top, topbot, left, leftright, arr, baseW } = imgsecs[i].ascii;\n  // top += 1;\n  const lim = time / delay_;\n  let count = 1;\n  requestAnimationFrame(animation);\n  async function animation(now) {\n    const percentage = Math.round(\n      mapRange(count, 0, lim, curprev, curnow, easeInOut) * baseW\n    );\n    for (let y = top; y <= topbot; y++) {\n      for (let x = left; x <= leftright; x++) {\n        let newchar = canvasData[y]?.[x];\n        const str = arr.ascii[x - left + percentage + (y - top) * arr.w];\n        newchar !== char.bg && newchar && str !== ` ` && (newchar = str);\n        canvasData[y][x] = newchar;\n      }\n    }\n    cmtRenderScreen();\n    count++;\n    await wait(delay_);\n    if (!stop && imgsecs[i].ascii && count <= lim) {\n      myrequest = requestAnimationFrame(animation);\n    }\n  }\n  return () => {\n    stop = true;\n  };\n}\n\nfunction mapRange(\n  value,\n  inMin,\n  inMax,\n  outMin,\n  outMax,\n  easingFunction = (v) => v\n) {\n  let normalizedValue = (value - inMin) / (inMax - inMin);\n  let easedValue = easingFunction(normalizedValue);\n  return easedValue * (outMax - outMin) + outMin;\n}\n\nfunction easeInOut(t) {\n  return t < 0.5 ? 4 * t * t * t : -1 + (4 - 2 * t) * t;\n}\n\nfunction manualResponsive(el) {\n  const { clientWidth: w } = el;\n  el.className = `${w > 1536 ? 'xxl' : ''} ${w > 1280 ? 'xl' : ''} ${\n    w > 1024 ? 'lg' : ''\n  } ${w > 768 ? 'md' : ''} ${w > 640 ? 'sm' : ''}`;\n}\n\nfunction getNoteResponsiveClass(w) {\n  if (w > 1280) {\n    return 'xl';\n  } else if (w > 1024) {\n    return 'lg';\n  } else if (w > 768) {\n    return 'md';\n  } else if (w > 640) {\n    return 'sm';\n  }\n  return 'ssm';\n}\n\nfunction duoResponsive(isFinal = true) {\n  stopEvething = true;\n  lazyList = {};\n  lazyQ = [];\n  lazyQCur = -1;\n  lazyQBlock = false;\n  stopSlideAscii();\n  inputResponsive && (inputResponsive.value = innerWidth);\n  const width = Math.max(outerWidth - innerWidth - 100, 0);\n\n  if (width < widthLimit) {\n    window.canvasData = Array.from({ length: screenlength }, () =>\n      'This-is-too-small'.split('')\n    );\n    window.fixedLayer = Array.from({ length: screenlength }, () =>\n      Array.from({ length: 'This-is-too-small'.length }, () => null)\n    );\n    cmtRenderScreen();\n    setEvent(mainbody, 'onscroll', null);\n    setEvent(document, 'onmousemove', null);\n    allImgHome.forEach(({ hoverlayer }) => {\n      if (!hoverlayer) {\n        return;\n      }\n      setEvent(hoverlayer, 'onmouseenter', null);\n      setEvent(hoverlayer, 'onmouseleave', null);\n    });\n    return;\n  }\n  isFinal && console.log('responsive rerender');\n  copy.style.width = `${width}px`;\n  manualResponsive(copy);\n  // canvas\n  const canvas = {\n    w: reMsrX(width),\n    h: reMsrY(realh.clientHeight),\n  };\n  window.canvasData = Array.from({ length: canvas.h }, () =>\n    Array.from({ length: canvas.w }, () => char.bg)\n  );\n  reSetup();\n  window.absoluteLayer = Array.from({ length: canvas.h }, () =>\n    Array.from({ length: canvas.w }, () => char.trans)\n  );\n  window.fixedLayer = Array.from({ length: screenlength }, () =>\n    Array.from({ length: canvas.w }, () => char.trans)\n  );\n  window.hoverLayer = Array.from({ length: canvas.h }, () =>\n    Array.from({ length: canvas.w }, () => char.trans)\n  );\n  calcScrollTop();\n  // draw rects\n  // drawRect(window.canvasData, allBg2);\n  drawFewRect(window.canvasData, allBg2, null, char.bg2, isFinal);\n  // draw dividers\n  drawFewRect(window.canvasData, allDivider, null, char.divider, isFinal, {\n    rx_: 0,\n    ry_: 0,\n  });\n  // draw horizontal line\n  inputNote &&\n    drawFewRect(window.canvasData, allHorizontalLine, null, char.hL, isFinal, {\n      rx_: 0,\n      ry_: 0,\n      fy: 1,\n    });\n  // draw images\n  if (isFinal) {\n    if (isHome) {\n      drawImgHome(window.canvasData, allImgHome);\n    } else {\n      drawImg(\n        window.canvasData,\n        allImg,\n        str2CanvasArr.bind({ isOL: true }),\n        true\n      );\n    }\n  } else {\n    if (isHome) {\n      drawFewRect(window.canvasData, allImgWrapper, null, char.mouse, isFinal);\n    } else {\n      drawFewRect(window.canvasData, allImg, null, char.mouse, isFinal);\n    }\n  }\n  // draw text\n  drawTxt(window.canvasData, allTxt, isFinal);\n  // draw input text\n  inputNote &&\n    ((inputNote.openData = undefined), (inputNote.rectData = undefined));\n  inputNote && drawTxt(window.canvasData, [inputNote], true, true);\n  // draw nav\n  isFinal &&\n    cacheKey.imgH.allkeys.forEach((key) => {\n      deleteCache(key);\n    });\n  isFinal && deleteCache(cacheKey.storyS.name);\n  window.curImgHolder\n    ? drawImgHolderFixed(3, null, isFinal)\n    : drawNav(null, isFinal);\n  // final render\n  inputNote && drawNotes();\n  cmtRenderScreen();\n  // set event\n  isFinal && setEvent(mainbody, 'onscroll', scrollResponsive);\n  isFinal && setEvent(document, 'onmousemove', mouseMove);\n  isFinal &&\n    allImgHome.forEach(({ hoverlayer }, i) => {\n      if (!hoverlayer) {\n        return;\n      }\n      setEvent(hoverlayer, 'onmouseenter', () => mouseEnter(i));\n      setEvent(hoverlayer, 'onmouseleave', () => mouseLeave(i));\n    });\n  isFinal && (stopEvething = false);\n}\n\nfunction drawNav(intensity = null, isFinal = true) {\n  drawFewRect(window.fixedLayer, [nav]);\n  drawTxt(window.fixedLayer, navTxt);\n  if (storySection.bg) {\n    const charbg = filterGrayRamp(char.bg2, intensity); //\n    drawFewRect(window.fixedLayer, [storySection.bg], null, charbg, isFinal);\n    drawTxt(window.fixedLayer, storySection.txt);\n    const { display } = getComputedStyle(storySection.img[0].parentElement);\n    if (display != 'none') {\n      drawImg(\n        window.fixedLayer,\n        storySection.img,\n        str2CanvasArr.bind({ isOL: false, intensityF: intensity, charbg }),\n        false,\n        cacheKey.storyS.name,\n        isFinal\n      );\n    }\n  }\n}\n\nfunction getRect(el) {\n  const obj = el.getBoundingClientRect();\n  const output = {\n    top: reMsrY(obj.top),\n    left: reMsrX(obj.left),\n    ogheight: reMsrY(obj.height),\n    ogwidth: reMsrX(obj.width),\n  };\n  output.topbot = output.top + output.ogheight;\n  output.leftright = output.left + output.ogwidth;\n  output.width = output.ogwidth + 1;\n  output.height = output.ogheight + 1;\n  return output;\n}\n\nfunction cmtRender(cmtContents) {\n  const cmtsNew = [];\n  const frag = $createFrag();\n  const length =\n    cmts.length > cmtContents.length ? cmts.length : cmtContents.length;\n  for (let i = 0; i < length; i++) {\n    const cmtContent = cmtContents[i];\n    const isWithinScroll = i > scrollTop;\n    if (cmts[i] && cmtContent) {\n      cmts[i].nodeValue = cmtContent.join('');\n      cmtsNew.push(cmts[i]);\n      isWithinScroll || cmts[i].remove();\n    } else if (cmtContent) {\n      const cmtNew = $createcomment(cmtContent.join(''));\n      isWithinScroll && frag.append(cmtNew);\n      cmtsNew.push(cmtNew);\n    } else if (cmts[i]) {\n      cmts[i].remove();\n    }\n  }\n  html.before(frag);\n  cmts = cmtsNew;\n}\n\nfunction cmtRenderScreen() {\n  if (window.scrollTop == undefined) {\n    return;\n  }\n  for (let y = 0; y < screenlength; y++) {\n    const fixedArr = window.fixedLayer?.[y];\n    const absArr = window.absoluteLayer?.[y + scrollTop];\n    const canvasArr =\n      canvasData[y + scrollTop]\n        ?.map((v, x) => {\n          let intensity = 0;\n          if (fixedArr?.[x]) {\n            if (fixedArr[x].intensity) {\n              intensity = fixedArr[x].intensity;\n            } else {\n              return fixedArr?.[x];\n            }\n          }\n          if (absArr?.[x]) {\n            return filterGrayRamp(absArr[x], intensity);\n          }\n          return filterGrayRamp(v, intensity);\n        })\n        .join('') || '';\n    cmts[y].nodeValue = canvasArr;\n  }\n}\n\nfunction filterGrayRamp(char, intensity) {\n  if (grayRampObj[char] == undefined || !intensity) {\n    return char;\n  }\n  let index = grayRampObj[char] - intensity;\n  return grayRamp[index] || grayRamp[0];\n}\n\nfunction drawFewRect(\n  data,\n  allRect,\n  rectArr,\n  rectchar = char.bg2,\n  isFinal = true,\n  { rx_ = rx, ry_ = ry, fy = 0, fxl = 0, fxr = 0 } = {}\n) {\n  rectArr ||\n    (rectArr = allRect.map((el) => {\n      el.rectData = getRect(el);\n      return el.rectData;\n    }));\n  for (let i = 0; i < rectArr.length; i++) {\n    let { leftright, topbot, left, top } = rectArr[i];\n    topbot += fy;\n    top += fy;\n    left += fxl;\n    leftright += fxr;\n    if (isLazy(!isFinal, top, topbot) || (top == 0 && topbot == 0)) {\n      continue;\n    }\n    for (let y = top; y <= topbot; y++) {\n      const line = data[y];\n      for (let x = left; x <= leftright; x++) {\n        if (checkRoundedRect(x, y, top, topbot, left, leftright, rx_, ry_)) {\n          line && (line[x] = rectchar);\n        }\n      }\n    }\n  }\n}\n\nfunction checkRoundedRect(x, y, top, topbot, left, leftright, rx, ry) {\n  if (\n    (y >= top && y <= topbot && x >= left + rx && x <= leftright - rx) ||\n    (y >= top + ry && y <= topbot - ry && x >= left && x <= leftright)\n  ) {\n    return true;\n  }\n  return false;\n  /*\n  if (isPointInOval(x, y, top + ry, left + rx)) {\n    return true;\n  } else if (isPointInOval(x, y, top + ry, leftright - rx)) {\n    return true;\n  } else if (isPointInOval(x, y, topbot - ry, left + rx)) {\n    return true;\n  } else if (isPointInOval(x, y, topbot - ry, leftright - rx)) {\n    return true;\n  }\n  function isPointInOval(x, y, centerX, centerY) {\n    // Calculate normalized distances\n    const dx = x - centerX;\n    const dy = y - centerY;\n\n    // Use the ellipse equation to check if the point is inside\n    return (dx * dx) / (rx * rx) + (dy * dy) / (ry * ry) <= 1;\n  }*/\n}\n\nfunction reMsrX(num) {\n  return Math.floor(num / scaleX);\n}\n\nfunction reMsrY(num) {\n  return Math.floor(num / scaleY);\n}\n\nfunction drawImg(\n  data,\n  allImg,\n  canvas2CanvasFunc = str2CanvasArr,\n  lazyLoad = false,\n  cacheKey = null,\n  isFinal = true\n) {\n  let returnobj;\n\n  if (!isFinal) {\n    drawFewRect(data, allImg, null, char.mouse);\n    return;\n  }\n\n  for (let i = 0; i < allImg.length; i++) {\n    const img = allImg[i];\n    const { leftright, topbot, left, top, width, height } = getRect(img);\n    const lazyKey = `${i}${leftright + topbot + left + top}${Math.random()\n      .toString(16)\n      .slice(2)}`;\n    lazyList[lazyKey] = async (byPassCond = false) => {\n      if (LazyDrawImgOpen(byPassCond, lazyLoad, top, topbot, lazyKey)) {\n        return;\n      }\n      //\n      let objectFit, isCover, containObj, ascii, cwidth;\n      if (hasCache(cacheKey)) {\n        ({ objectFit, isCover, containObj, ascii, cwidth } =\n          getCache(cacheKey));\n      } else {\n        ({ objectFit } = getComputedStyle(img));\n        isCover = objectFit == 'cover';\n        ctx.clearRect(0, 0, imgcanvas.width, imgcanvas.height);\n        imgcanvas.width = cwidth = width;\n        imgcanvas.height = height;\n        ctx.imageSmoothingEnabled = false;\n        containObj = await image2Canvas(img, width, height, 0, isCover);\n        const grayScales = convertToGrayScales(\n          ctx,\n          imgcanvas.width,\n          imgcanvas.height\n        );\n        ascii = drawAscii(grayScales, imgcanvas.width);\n        setCache(cacheKey, {\n          objectFit,\n          isCover,\n          containObj,\n          ascii,\n          cwidth,\n        });\n      }\n      //\n      canvas2CanvasFunc(\n        cwidth,\n        top,\n        topbot,\n        left,\n        leftright,\n        data,\n        ascii,\n        0,\n        0,\n        isCover ? 0 : containObj.top,\n        isCover ? 0 : containObj.left\n      );\n      returnobj = {\n        top,\n        topbot,\n        left,\n        leftright,\n        maskTop: isCover ? 0 : containObj.top,\n        maskLeft: isCover ? 0 : containObj.left,\n      };\n      lazyLoad && console.log(`lazyload image successful`);\n      LazyDrawImgClose();\n    };\n    lazyList[lazyKey]();\n  }\n  return returnobj;\n}\n\nfunction drawImgHome(data, allImg) {\n  const { top, left, topbot, leftright, width, height } = getRect(allImg[0].el);\n  if (width < 4 || height < 4) {\n    return;\n  }\n  const base = {\n    h: height,\n    w: width,\n  };\n\n  for (let igroup = 0; igroup < allImg.length; igroup++) {\n    imgsecs[igroup].ascii = {};\n    const { group, el, lbtn, rbtn, idcascii, idc, hoverlayer, hoverchild } =\n      allImg[igroup];\n    // draw image\n    const { top, left, topbot, leftright, width, height } = getRect(el);\n    const lazyKey = `${igroup}${leftright + topbot + left + top}${Math.random()\n      .toString(16)\n      .slice(2)}`;\n    lazyList[lazyKey] = async (byPassCond = false) => {\n      if (LazyDrawImgOpen(byPassCond, true, top, topbot, lazyKey)) {\n        return;\n      }\n      ctx.clearRect(0, 0, imgcanvas.width, imgcanvas.height);\n      imgcanvas.width = base.w * group.length;\n      imgcanvas.height = base.h;\n      ctx.imageSmoothingEnabled = false;\n      //\n      for (let iimg = 0; iimg < group.length; iimg++) {\n        const img = group[iimg];\n        const { objectFit } = getComputedStyle(img);\n        await image2Canvas(\n          img,\n          base.w,\n          base.h,\n          base.w * iimg,\n          objectFit == 'cover'\n        );\n      }\n      const grayScales = convertToGrayScales(\n        ctx,\n        imgcanvas.width,\n        imgcanvas.height\n      );\n      const ascii = drawAscii(grayScales, imgcanvas.width);\n      str2CanvasArr(\n        imgcanvas.width,\n        top,\n        topbot,\n        left,\n        leftright,\n        data,\n        ascii,\n        (curs[igroup].value - 1) * base.w\n      );\n      imgsecs[igroup].ascii.arr = { ascii, w: imgcanvas.width };\n      console.log('lazyload image successful');\n      LazyDrawImgClose();\n    };\n    lazyList[lazyKey]();\n    // lbtn\n    drawAbs(lbtn, char.lbtn.str, char.lbtn.w, char.lbtn.h);\n    // rbtn\n    drawAbs(rbtn, char.rbtn.str, char.rbtn.w, char.rbtn.h);\n    // idc\n    drawAbs(idc, idcascii, idcascii.length, 1);\n    // hover\n    const hoverrect = getRect(hoverchild);\n    imgsecs[igroup].isHover &&\n      drawFewRect(window.absoluteLayer, [hoverchild], [hoverrect]);\n    imgsecs[igroup].isHover && drawTxt(window.absoluteLayer, [hoverchild]);\n    imgsecs[igroup].hoverrect = hoverrect;\n    imgsecs[igroup].hoverchild = hoverchild;\n    // send to window\n    imgsecs[igroup].ascii = {\n      top,\n      topbot,\n      left,\n      leftright,\n      baseW: base.w,\n      ...imgsecs[igroup].ascii,\n    };\n  }\n  //\n}\n\nfunction drawAbs(btn, ascii, w, h) {\n  const { top, left } = getRect(btn);\n  str2CanvasArrNoMask(\n    w,\n    top,\n    top + h - 1,\n    left,\n    left + w - 1,\n    window.absoluteLayer,\n    ascii\n  );\n}\n\nfunction convertToGrayScales(context, width, height) {\n  const imageData = context.getImageData(0, 0, width, height);\n  const contrast = 1.2; //convert to decimal & shift range: [0..2]\n  const intercept = 128 * (1 - contrast);\n  const grayScales = [];\n\n  for (let i = 0; i < imageData.data.length; i += 4) {\n    const r = imageData.data[i] * contrast + intercept;\n    const g = imageData.data[i + 1] * contrast + intercept;\n    const b = imageData.data[i + 2] * contrast + intercept;\n\n    const grayScale = toGrayScale(r, g, b);\n    imageData.data[i] =\n      imageData.data[i + 1] =\n      imageData.data[i + 2] =\n        grayScale;\n\n    grayScales.push(grayScale);\n  }\n\n  // context.putImageData(imageData, 0, 0);\n\n  return grayScales;\n}\n\nfunction toGrayScale(r, g, b) {\n  const v = 0.21 * r + 0.72 * g + 0.07 * b;\n  return v < 0 ? 0 : v > 255 ? 255 : v;\n}\n\nfunction drawAscii(grayScales, width) {\n  let str = '';\n  for (let i = 0; i < grayScales.length; i++) {\n    str += getCharacterForGrayScale(grayScales[i]);\n  }\n  return str;\n  //\n  const ascii = [[]];\n  for (let i = 0; i < grayScales.length; i++) {\n    const grayScale = grayScales[i];\n    const nextChars = getCharacterForGrayScale(grayScale);\n    ascii[ascii.length - 1].push(nextChars);\n    if ((i + 1) % width === 0) {\n      ascii.push([]);\n    }\n  }\n  return ascii;\n}\n\nfunction getCharacterForGrayScale(grayScale) {\n  return grayRamp[Math.ceil(((rampLength - 1) * grayScale) / 255)];\n}\n\nfunction drawTxtOpen(txt, isFinal, isInput) {\n  if (isInput && txt.openData) {\n    txt.openData.arrcontent = [`${txt.value}`];\n    return false;\n  }\n  let { top, left, ogwidth, topbot } = getRect(txt);\n  if (isLazy(!isFinal, top, topbot)) {\n    return true;\n  }\n  let {\n    display,\n    textAlign,\n    paddingLeft: pl,\n    paddingRight: pr,\n    paddingTop: pt,\n    paddingBottom: pb,\n  } = getComputedStyle(txt);\n  const content = txt.innerText.trim() || txt.value;\n  if (display == 'none' || !content) {\n    return true;\n  }\n  let arrcontent = content.split('\\n');\n  pl = reMsrX(+pl.slice(0, -2));\n  pr = reMsrX(+pr.slice(0, -2));\n  pt = reMsrY(+pt.slice(0, -2));\n  pb = reMsrY(+pb.slice(0, -2));\n  top += pt + 1;\n  left += pl;\n  ogwidth -= pl + pr;\n  if (ogwidth < 1) {\n    return true;\n  }\n  txt.openData = {\n    top,\n    left,\n    ogwidth,\n    topbot,\n    arrcontent,\n    textAlign,\n  };\n}\n\nfunction drawTxt(data, allTxt, isFinal = true, isInput = false) {\n  for (let i = 0; i < allTxt.length; i++) {\n    const txt = allTxt[i];\n    if (drawTxtOpen(txt, isFinal, isInput)) {\n      continue;\n    }\n    const { top, left, ogwidth, topbot, arrcontent, textAlign } = txt.openData;\n    let output = [];\n    if (isInput) {\n      output = [arrcontent[0].slice(-ogwidth)];\n    } else {\n      for (let k = 0; k < arrcontent.length; k++) {\n        let content = arrcontent[k];\n        if (content.length == 0) {\n          output.push('');\n        }\n        while (content.length > 0) {\n          let extracted = content.slice(0, ogwidth);\n          content = content.slice(ogwidth);\n          if (content.length > 0 && content[0] != ` `) {\n            for (let i = extracted.length - 1; i >= 0; i--) {\n              if (extracted[i] == ` `) {\n                content = extracted.slice(i) + content;\n                extracted = extracted.slice(0, i);\n                break;\n              }\n            }\n          }\n          extracted = extracted.trim();\n          content = content.trim();\n          if (textAlign == 'center') {\n            extracted = `${extracted}${\n              output.length == topbot - top && content.length > 0 ? '…' : ''\n            }`;\n            let rest = (ogwidth - extracted.length) / 2;\n            rest = rest > 0 ? rest : 0;\n            extracted = `${` `.repeat(Math.ceil(rest))}${extracted}${` `.repeat(\n              Math.floor(rest)\n            )}`;\n          }\n          output.push(extracted);\n          if (output.length > topbot - top) {\n            break;\n          }\n        }\n      }\n    }\n\n    for (let y = top; y < top + output.length; y++) {\n      const yo = y - top;\n      const line = output[yo];\n      for (let x = left; x < left + line.length; x++) {\n        if (data[y]) {\n          let char = output[yo]?.[x - left] || data[y][x];\n          char = char == ` ` ? data[y][x] : char;\n          data[y][x] = char;\n        }\n      }\n    }\n\n    // console.log(display, lineHeight, textAlign);\n    // console.log(txt, rect.ogheight);\n    // console.log(txt, style['display'], style['font-size'], style['text-align']);\n  }\n}\n\nfunction image2Canvas(img, cW, cH, posX = 0, isCover = true) {\n  return new Promise((resolve) => {\n    if (img.i2C) {\n      resolve(i2Conload(img.i2C, cW, cH, posX, isCover));\n      return;\n    } else {\n      const image = (img.i2C = new Image());\n      image.onload = () => {\n        image.onload = null;\n        resolve(i2Conload(image, cW, cH, posX, isCover));\n      };\n      image.crossOrigin = '';\n      image.src = img.getAttribute(`data-src`) || img.src;\n    }\n  });\n}\n\nfunction i2Conload(image, cW, cH, posX, isCover) {\n  const scaleFactor = Math[isCover ? 'max' : 'min'](\n    cW / image.width,\n    cH / (image.height / hratio)\n  );\n  const dWidth = image.width * scaleFactor;\n  const dHeight = (image.height / hratio) * scaleFactor;\n  const x = cW / 2 - dWidth / 2;\n  const y = cH / 2 - dHeight / 2;\n\n  const sx = Math.abs(x / scaleFactor);\n  const sy = Math.abs(y / scaleFactor) * hratio;\n  const sWidth = image.width;\n  const sHeight = image.height;\n\n  ctx.fillStyle = '#e3e3ca';\n  ctx.fillRect(posX + 0, 0, cW, cH);\n  isCover\n    ? ctx.drawImage(\n        image,\n        sx,\n        sy,\n        sWidth,\n        sHeight,\n        posX + 0,\n        0,\n        dWidth,\n        dHeight\n      )\n    : ctx.drawImage(image, posX + x, y, dWidth, dHeight);\n  return {\n    top: Math.round(y),\n    left: Math.round(posX + x),\n  };\n}\n\nfunction str2CanvasArr(\n  width,\n  top,\n  topbot,\n  left,\n  leftright,\n  data,\n  str,\n  offsetX = 0,\n  offsetY = 0\n) {\n  const intensityF = this.intensityF;\n  const charbg = this.charbg ?? char.bg2;\n  for (let y = top; y <= topbot; y++) {\n    for (let x = left; x <= leftright; x++) {\n      const newchar = str[x - left + offsetX + (y - top + offsetY) * width];\n      if (data[y]?.[x] && data[y][x] == charbg && newchar !== ` `) {\n        data[y][x] = intensityF ? filterGrayRamp(newchar, intensityF) : newchar;\n      } else {\n        // console.log(y, x, newchar, data[y][x]);\n      }\n    }\n  }\n  addOL(this.isOL, data, top, left, topbot, leftright);\n}\n\nfunction str2CanvasArrNoMask(\n  width,\n  top,\n  topbot,\n  left,\n  leftright,\n  data,\n  str,\n  offsetX = 0,\n  offsetY = 0,\n  maskTop = 0,\n  maskLeft = 0\n) {\n  topbot -= maskTop;\n  leftright -= maskLeft;\n  const compTop = top + maskTop;\n  const compLeft = left + maskLeft;\n  for (let y = compTop; y <= topbot; y++) {\n    for (let x = compLeft; x <= leftright; x++) {\n      const newchar = str[x - left + (y - top) * width];\n      if (data[y]?.[x] !== undefined && newchar !== ` `) {\n        data[y][x] = newchar;\n      } else {\n        // console.log(y, x, newchar, data[y][x]);\n      }\n    }\n  }\n  addOL(this.isOL, data, compTop, compLeft, topbot, leftright);\n}\n\nfunction canvas2CanvasArr(\n  top,\n  topbot,\n  left,\n  leftright,\n  data,\n  ascii,\n  offsetX = 0,\n  offsetY = 0\n) {\n  const intensityF = this.intensityF;\n  const charbg = this.charbg ?? char.bg2;\n  for (let y = top; y <= topbot; y++) {\n    for (let x = left; x <= leftright; x++) {\n      const newchar = ascii[y - top + offsetY]?.[x - left + offsetX];\n      if (data[y]?.[x] && data[y][x] == charbg && newchar) {\n        data[y][x] = intensityF ? filterGrayRamp(newchar, intensityF) : newchar;\n      } else {\n        // console.log(y, x, newchar, data[y][x]);\n      }\n    }\n  }\n  addOL(this.isOL, data, top, left, topbot, leftright);\n}\n\nfunction canvas2CanvasArrNoMask(\n  top,\n  topbot,\n  left,\n  leftright,\n  data,\n  ascii,\n  offsetX = 0,\n  offsetY = 0,\n  maskTop = 0,\n  maskLeft = 0\n) {\n  topbot -= maskTop;\n  leftright -= maskLeft;\n  const compTop = top + maskTop;\n  const compLeft = left + maskLeft;\n  for (let y = compTop; y <= topbot; y++) {\n    for (let x = compLeft; x <= leftright; x++) {\n      const newchar = ascii[y - top]?.[x - left];\n      if (data[y]?.[x] !== undefined && newchar) {\n        data[y][x] = newchar;\n      } else {\n        // console.log(y, x, newchar, data[y][x]);\n      }\n    }\n  }\n  addOL(this.isOL, data, compTop, compLeft, topbot, leftright);\n}\n\nfunction addOL(isOL, data, top, left, topbot, leftright) {\n  if (isOL) {\n    for (let y = top + 1; y <= topbot - 1; y++) {\n      data[y] !== undefined &&\n        data[y]?.[left] != char.bg &&\n        (data[y][left] = data[y][leftright] = '║');\n    }\n    if (data[top] !== undefined) {\n      for (let x = left + 1; x <= leftright - 1; x++) {\n        data[top][x] != char.bg && (data[top][x] = data[topbot][x] = '═');\n      }\n      data[top][left] != char.bg && (data[top][left] = '╔');\n      data[top][leftright] != char.bg && (data[top][leftright] = '╗');\n    }\n    if (data[topbot] !== undefined) {\n      data[topbot][left] != char.bg && (data[topbot][left] = '╚');\n      data[topbot][leftright] != char.bg && (data[topbot][leftright] = '╝');\n    }\n  }\n}\n\nfunction clearRect(top, topbot, left, leftright, data, char) {\n  for (let y = top; y <= topbot; y++) {\n    for (let x = left; x <= leftright; x++) {\n      if (data[y]?.[x] !== undefined) {\n        data[y][x] = char;\n      } else {\n        // console.log(y, x, newchar, data[y][x]);\n      }\n    }\n  }\n}\n\nfunction calcMousePos(e) {\n  const mouseX = Math.floor(\n    (e.clientX * copy.clientWidth) / main.clientWidth / scaleX\n  );\n  const mouseY = Math.floor(\n    (e.clientY * copy.clientHeight) / main.clientHeight / scaleY\n  );\n  if (window.mouseX == mouseX && window.mouseY == mouseY) {\n    return false;\n  }\n  const obj = {\n    mouseX: window.mouseX,\n    mouseY: window.mouseY,\n  };\n  window.mouseX = mouseX;\n  window.mouseY = mouseY;\n  return obj;\n}\n\nfunction calcScrollTop() {\n  const actualScroll =\n    Math.floor(\n      (mainbody.scrollTop * (realh.clientHeight - innerHeight)) /\n        (realhmain.clientHeight - innerHeight) /\n        scaleY\n    ) || 0;\n  // console.log(mainbody.scrollTop, realhmain.clientHeight);\n  const scrollTop =\n    screenlength > canvasData.length - actualScroll\n      ? canvasData.length - screenlength\n      : actualScroll;\n  window.scrollTop = scrollTop <= 0 ? 0 : scrollTop;\n}\n\nfunction isLazy(lazyLoad, top, topbot) {\n  return (\n    lazyLoad &&\n    (top >= window.scrollTop + screenlength || topbot <= window.scrollTop)\n  );\n}\n\nfunction LazyDrawImgClose() {\n  lazyQBlock = false;\n  if (lazyQ[lazyQCur + 1]) {\n    lazyQ[++lazyQCur](true);\n  } else {\n    cmtRenderScreen();\n  }\n}\n\nfunction LazyDrawImgOpen(byPassCond, lazyLoad, top, topbot, lazyKey) {\n  if (!byPassCond && isLazy(lazyLoad, top, topbot)) {\n    return true;\n  }\n  if (lazyQBlock) {\n    lazyQ.push(lazyList[lazyKey]);\n    delete lazyList[lazyKey];\n    return true;\n  }\n  lazyQBlock = true;\n  delete lazyList[lazyKey];\n  return false;\n}\n"],"names":["body","document","html","documentElement","main","$","mainbody","copy","imgcanvas","window","OffscreenCanvas","$create","rx","ry","ctx","getContext","willReadFrequently","imageSmoothingEnabled","fillStyle","isDeveloper","isPage","isDesigner","isHome","isWork","rem","parseFloat","getComputedStyle","fontSize","hratio","scaleX","scaleY","widthLimit","lazyList","lazyQ","lazyQCur","lazyQBlock","char","note","bg","bg2","trans","lbtn","stringifyASCII","rbtn","idc","mouse","divider","hL","cacheKey","imgH","name","allkeys","storyS","grayRamp","grayRampObj","split","reduce","p","c","i","length","rampLength","arr","str","join","w","h","screenlength","cmts","cmtsScreen","stopEvething","mainmainbody","mainnav","fragcopy","$createFrag","childElement","children","appendChild","cloneNode","location","hash","el","scrollTo","top","offsetTop","clientHeight","left","behavior","reSetup","newscreenlength","reMsrY","innerHeight","fragcmt","forEach","cmt","remove","Array","from","v","k","$createcomment","canvasData","append","before","scrollToTop","realh","realhmain","nav","navTxt","$$","allBg2","imgHolder","imgHolderMain","allImgHomeMain","allImgWrapper","allImgHome","nextElementSibling","querySelector","group","querySelectorAll","hoverlayer","hoverchild","idcascii","childElementCount","fill","flat","allImg","allImgMain","allTxt","allDivider","storySection","img","txt","inputNoteMain","inputNote","notebookHolder","inputResponsive","allHorizontalLine","notebookData","slide","cur","curnow","value","imgsecs","setAttribute","indicators","classList","add","imgwrappers","style","transform","console","log","curs","currentSlideEls","slideObserver","IntersectionObserver","entries","observer","entry","target","isIntersecting","includes","push","isObserved","filter","unobserve","threshold","intervalId","matchMedia","matches","setInterval","getRandItem","stopPrev","slideAscii","imgwrapper","observe","addEventListener","closest","imgcopyarr","frag","div","imgcopy","toggle","curImgHolder","curImgHolderChild","key","curchild","visibility","originsrc","src","getAttribute","drawImgHolderFixed","onclick","formattedKey","fetchNoteBook","history","replaceState","href","btn","btncopy","form","sessionStorage","getItem","disabled","parentElement","onsubmit","setItem","removeItem","oninput","drawFewRect","rectData","fxl","drawTxt","allNotes","drawNotes","fixedLayer","rx_","setEvent","on","fn","mouseMove","e","mouseChange","calcMousePos","scrollTop","mouseY","ogY","mouseX","ogX","_a","_b","_c","intensity","fixedArr","absArr","absoluteLayer","filterGrayRamp","staticArr","replaceChar","x","y","content","nodeValue","slice","scrollResponsive","mouseEnter","hoverrect","isHover","mouseLeave","isFinal","vl","drawNav","drawImg","str2CanvasArrNoMask","bind","isOL","stopSlideAscii","curprev","time","stop","ascii","delay_","topbot","leftright","baseW","lim","count","async","animation","now","percentage","Math","round","mapRange","easeInOut","newchar","wait","myrequest","requestAnimationFrame","inMin","inMax","outMin","outMax","easingFunction","normalizedValue","easedValue","t","manualResponsive","clientWidth","className","getNoteResponsiveClass","duoResponsive","innerWidth","width","max","outerWidth","canvas","reMsrX","hoverLayer","ry_","fy","drawImgHome","str2CanvasArr","openData","deleteCache","charbg","display","intensityF","getRect","obj","getBoundingClientRect","output","ogheight","height","ogwidth","cmtRender","cmtContents","cmtsNew","cmtContent","isWithinScroll","cmtNew","cmtRenderScreen","canvasArr","map","index","data","allRect","rectArr","rectchar","fxr","isLazy","line","checkRoundedRect","num","floor","canvas2CanvasFunc","lazyLoad","returnobj","lazyKey","random","toString","byPassCond","LazyDrawImgOpen","objectFit","isCover","containObj","cwidth","hasCache","getCache","clearRect","image2Canvas","grayScales","convertToGrayScales","drawAscii","setCache","maskTop","maskLeft","base","igroup","iimg","drawAbs","context","imageData","getImageData","contrast","intercept","r","g","b","grayScale","toGrayScale","getCharacterForGrayScale","ceil","drawTxtOpen","isInput","arrcontent","textAlign","paddingLeft","pl","paddingRight","pr","paddingTop","pt","paddingBottom","pb","innerText","trim","extracted","rest","repeat","yo","cW","cH","posX","Promise","resolve","i2C","i2Conload","image","Image","onload","crossOrigin","scaleFactor","dWidth","dHeight","sx","abs","sy","sWidth","sHeight","fillRect","drawImage","offsetX","offsetY","this","addOL","compTop","compLeft","canvas2CanvasArr","canvas2CanvasArrNoMask","clientX","clientY","calcScrollTop","actualScroll","LazyDrawImgClose","getScrollbarWidth","responsive","innerHTML","setProperty","onresize","throttle_debounce"],"mappings":"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"}